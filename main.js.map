{"version":3,"file":"main.js","mappings":"mBAAA,SAASA,EAAUC,GACjBA,EAAaC,UAAUC,IAAI,mBAC3BF,EAAaG,eAAiB,SAACC,GAAC,OAAKC,EAAcD,EAAGJ,EAAa,EAE/DA,EAAaC,UAAUK,SAAS,2BAClCN,EAAaO,cAAc,kBAAkBC,QAE/CC,SAASC,iBAAiB,UAAWV,EAAaG,eACpD,CAYA,SAASQ,EAAaX,GACpBA,EAAaC,UAAUW,OAAO,mBAC9BH,SAASI,oBAAoB,UAAWb,EAAaG,uBAC9CH,EAAaG,cACtB,CAEA,IAAME,EAAgB,SAACD,EAAGJ,GACV,WAAVI,EAAEU,KAAkBH,EAAaX,EACvC,EC5Bae,EAAS,gBACTC,EAAQ,uCCDrB,SAASC,EAAeC,EAAaC,EAAMC,EAAcC,EAAkBC,EAAmBC,GAC5F,IAAMC,EAAcJ,EAAab,cAAc,sBAAsBkB,WAAU,GAC/ED,EAAYjB,cAAc,gBAAgBmB,IAAMP,EAAKQ,KACrDH,EAAYjB,cAAc,gBAAgBqB,IAAMT,EAAKU,KACrDL,EAAYjB,cAAc,gBAAgBuB,YAAcX,EAAKU,KAC7DL,EAAYjB,cAAc,uBAAuBuB,YAAcX,EAAKY,MAAQZ,EAAKY,MAAMC,OAAS,EAChGR,EAAYS,IAAMd,EAAKc,IAEvB,IAAMC,EAAiBV,EAAYjB,cAAc,sBAYjD,OAXIY,EAAKY,MAAMI,MAAK,SAACC,GAAI,OAAKA,EAAKH,MAAQf,CAAW,KACpDgB,EAAejC,UAAUC,IAAI,+BAE/BsB,EAAYjB,cAAc,gBAAgBG,iBAAiB,SAAS,kBAAMW,EAAiBF,EAAK,IAE5FA,EAAKkB,MAAMJ,MAAQf,EACrBM,EAAYjB,cAAc,wBAAwBG,iBAAiB,SAAS,kBAAMY,EAAkBE,EAAY,IAC3GA,EAAYjB,cAAc,wBAAwBK,SAEzDsB,EAAexB,iBAAiB,SAAS,SAACN,GAAOmB,EAAOnB,EAAGoB,EAAY,IAEhEA,CACT,CCPA,SAASc,EAAQC,EAAaC,EAAcC,GACtCD,EAAaE,SAASC,gBACxBH,EAAaI,kBAAkBJ,EAAaK,QAAQC,cAC/CN,EAAaI,kBAAkB,IAEjCJ,EAAaE,SAASK,MAZ7B,SAAwBC,EAAMC,EAAOR,GACnC,IAAMS,EAAQF,EAAKzC,cAAc,IAAD4C,OAAKF,EAAMG,GAAE,WAC7CH,EAAMhD,UAAUW,OAAO6B,EAAiBY,gBAAgBC,MAAM,IAC9DJ,EAAMjD,UAAUW,OAAO6B,EAAiBc,WAAWD,MAAM,IACzDJ,EAAMpB,YAAc,QACtB,CAcS0B,CAAejB,EAAaC,EAAcC,GA1BnD,SAAwBO,EAAMC,EAAOQ,EAAchB,GACjD,IAAMS,EAAQF,EAAKzC,cAAc,IAAD4C,OAAKF,EAAMG,GAAE,WAC7CH,EAAMhD,UAAUC,IAAIuC,EAAiBY,gBAAgBC,MAAM,IAC3DJ,EAAMjD,UAAUC,IAAIuC,EAAiBc,WAAWD,MAAM,IACtDJ,EAAMpB,YAAc2B,CACtB,CAeIC,CACEnB,EACAC,EACAA,EAAamB,kBACblB,EAGN,CAEA,IAGMmB,EAAoB,SAACC,EAAWC,GACpCA,EAAcC,SAJQ,SAACF,GAAS,OAChCA,EAAU1B,MAAK,SAACK,GAAY,OAAMA,EAAaE,SAASK,KAAK,GAAC,CAGrCiB,CAAgBH,EAC3C,EA+BA,SAASI,EAAgB1B,EAAaE,GAC/BF,EAAY2B,YAAe3B,EAAY4B,UAE5C5B,EAAY2B,WAAWE,SAAQ,SAACnB,GAC9BX,EAAQC,EAAaU,EAAOR,EAC9B,IACAmB,EAAkBrB,EAAY2B,WAAY3B,EAAY4B,SACxD,C,sGCjDA,IAAM/C,EAAeX,SAASF,cAAc,kBAAkB8D,QACxDC,EAAY7D,SAASF,cAAc,iBACnCgE,EAAY9D,SAASF,cAAc,qBACnCiE,EAAmB/D,SAASF,cAAc,oBAC1CkE,EAAehE,SAASF,cAAc,wBACtCmE,EAAiBjE,SAASF,cAAc,sBACxCoE,EAAoBlE,SAASF,cAAc,yBAC3CqE,EAAgBnE,SAASF,cAAc,wBACvCsE,EAAiBN,EAAUhE,cAAc,iBACzCuE,EAAgBP,EAAUhE,cAAc,mBACxCwE,EAAkBtE,SAASF,cAAc,2BACzCyE,EAAcV,EAAUW,cAAc1E,cAAc,wBAEpDkC,EAAmB,CACvByC,aAAc,eACdC,cAAe,gBACfC,qBAAsB,iBACtB/B,gBAAiB,2BACjBE,WAAY,8BAIR8B,EAAkB,CACtBrC,KAAMsC,EAAad,IAErBa,EAAgBxD,KAAOwD,EAAgBrC,KAAKzC,cAAc,2BAC1D8E,EAAgBE,YAAcF,EAAgBrC,KAAKzC,cAAc,kCAGjE,IAAMiF,EAAiB,CACrBC,QAAShF,SAASF,cAAc,aAElCiF,EAAe3D,KAAO2D,EAAeC,QAAQlF,cAAc,mBAC3DiF,EAAeD,YAAcC,EAAeC,QAAQlF,cAAc,yBAClEiF,EAAeE,OAASF,EAAeC,QAAQlF,cAAc,mBAG7D,IAAMoF,EAAc,CAClB3C,KAAMsC,EAAab,IAErBkB,EAAY9D,KAAO8D,EAAY3C,KAAKzC,cAClC,gCAEFoF,EAAYhE,KAAOgE,EAAY3C,KAAKzC,cAAc,0BAGlD,IAAMqF,EAAgB,CACpB5C,KAAMsC,EAAaZ,IAErBkB,EAAcjE,KAAOiE,EAAc5C,KAAKzC,cAAc,0BAEtD,IAAMsF,EAAiB,CACrB7C,KAAMsC,EAAaP,IAKrB,SAASO,EAAatF,GACpB,OAAOA,EAAaO,cAAc,eACpC,CAEA,SAASuF,EAAc3E,GACrB0D,EAAenD,IAAMP,EAAKQ,KAC1BkD,EAAejD,IAAMT,EAAKU,KAC1BiD,EAAchD,YAAcX,EAAKU,KACjC9B,EAAUwE,EACZ,CA0DA,SAASwB,EAAkBC,GACzBR,EAAe3D,KAAKC,YAAckE,EAAKnE,KACvC2D,EAAeD,YAAYzD,YAAckE,EAAKC,MAC9CT,EAAeE,OAAOQ,MAAMC,gBAAkB,OAAHhD,OAAU6C,EAAKN,OAAM,KAChEF,EAAevD,IAAM+D,EAAK/D,IAC1BuD,EAAezE,OAASiF,EAAKjF,MAC/B,CAkBA,SAASqF,EAAsB5E,GAC7BzB,EAAUgF,GACVA,EAAgBsB,aAAe7E,CACjC,CAYA,SAAS8E,EAAWlG,EAAGoB,GCrHvB,IAAkB+E,EDsHXnG,EAAEoG,OAAOvG,UAAUK,SAAS,+BCtGnC,SAAqBiG,GACnB,OAAOE,MAAM,qCAADtD,OAC2BpC,EAAM,iBAAAoC,OAAgBoD,GAC3D,CACEG,OAAQ,SACRC,QAAS,CACPC,cAAe5F,KAGnB6F,MAAK,SAACC,GAAQ,OACdA,EAASC,GACLD,EAASE,OACTC,QAAQC,OAAO,GAAD/D,OAAI2D,EAASK,OAAM,kBAAiB,GAE1D,CDgGIC,CAAY5F,EAAYS,KACrB4E,MAAK,SAACQ,GACL7F,EAAYjB,cAAc,uBAAuBuB,YAAcuF,EAActF,MAAMC,OACnF5B,EAAEoG,OAAOvG,UAAUW,OAAO,8BAC5B,IACC0G,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,KCnIpBhB,EDuHL/E,EAAYS,ICtHhBwE,MAAM,qCAADtD,OAC2BpC,EAAM,iBAAAoC,OAAgBoD,GAC3D,CACEG,OAAQ,MACRC,QAAS,CACPC,cAAe5F,KAGnB6F,MAAK,SAACC,GAAQ,OACdA,EAASC,GACLD,EAASE,OACTC,QAAQC,OAAO,GAAD/D,OAAI2D,EAASK,OAAM,eAAc,KD4GhDN,MAAK,SAACQ,GACL7F,EAAYjB,cAAc,uBAAuBuB,YAAcuF,EAActF,MAAMC,OACnF5B,EAAEoG,OAAOvG,UAAUC,IAAI,8BACzB,IACCoH,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,GAStC,CAqBA,SAASG,EAAYC,EAAcC,GACjCD,EAAa1H,UAAUC,IAAI,8BAC3ByH,EAAa7F,YAAc8F,CAC7B,CAOA,SAASC,EAAmBC,GAC1BA,EAAO/D,UAAW,CACpB,CAGAY,EAAkBjE,iBAAiB,SAAS,WAC1CX,EAAUyE,GApJZ,SAAyBgB,GACvBH,EAAgBxD,KAAKkG,MAAQvC,EAAe3D,KAAKC,YACjDuD,EAAgBE,YAAYwC,MAAQvC,EAAeD,YAAYzD,WACjE,CAkJEkG,CAAgBxC,GAChBvB,EAAgBoB,EAAgBrC,KAAMP,EACxC,IAEAmC,EAAclE,iBAAiB,SAAS,WACtCX,EAAU0E,GACVR,EAAgB0B,EAAY3C,KAAMP,EACpC,IAEA+C,EAAeE,OAAOhF,iBAAiB,SAAS,WAC9CX,EAAU2E,GACVT,EAAgB2B,EAAc5C,KAAMP,EACtC,IAEAhC,SAASwH,iBAAiB,iBAAiB7D,SAAQ,SAAC8D,GAClDA,EAAYxH,iBAAiB,SAAS,SAACN,GACrCO,EAAaP,EAAEoG,OAAO2B,QAAQ,UAChC,GACF,IAEA9C,EAAgBrC,KAAKtC,iBAAiB,UAnKtC,SAAiCN,GCvEjC,IAA2BgI,EDwEzBhI,EAAEiI,iBACFhD,EAAgBrC,KAAKmB,QAAQrC,YAAc,iBCzElBsG,ED0EP,CAChBvG,KAAMwD,EAAgBxD,KAAKkG,MAC3B9B,MAAOZ,EAAgBE,YAAYwC,OC3E9BtB,MAAM,qCAADtD,OAAsCpC,EAAM,aAAa,CACnE2F,OAAQ,QACRC,QAAS,CACPC,cAAe5F,EACf,eAAgB,oBAElBsH,KAAMC,KAAKC,UAAUJ,KACpBvB,MAAK,SAACC,GAAQ,OACfA,EAASC,GACLD,EAASE,OACTC,QAAQC,OAAO,GAAD/D,OAAI2D,EAASK,OAAM,wBAAuB,KDmE3DN,MAAK,SAACb,GACLR,EAAe3D,KAAKC,YAAckE,EAAKnE,KACvC2D,EAAeD,YAAYzD,YAAckE,EAAKC,KAChD,IACCqB,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,IAC/BkB,SAAQ,WACPpD,EAAgBrC,KAAKmB,QAAQrC,YAAc,WAC7C,IAEFnB,EAAa6D,EACf,IAmJAmB,EAAY3C,KAAKtC,iBAAiB,UAhJlC,SAA8BN,GC5E9B,IAAkBsI,ED6EhBtI,EAAEiI,iBACF1C,EAAY3C,KAAKmB,QAAQrC,YAAc,iBC9EvB4G,EDgFP,CACP7G,KAAM8D,EAAY9D,KAAKkG,MACvBpG,KAAMgE,EAAYhE,KAAKoG,OCjFlBtB,MAAM,qCAADtD,OAAsCpC,EAAM,UAAU,CAChE2F,OAAQ,OACRC,QAAS,CACPC,cAAe5F,EACf,eAAgB,oBAElBsH,KAAMC,KAAKC,UAAUE,KACpB7B,MAAK,SAACC,GAAQ,OACfA,EAASC,GACLD,EAASE,OACTC,QAAQC,OAAO,GAAD/D,OAAI2D,EAASK,OAAM,eAAc,KDyElDN,MAAK,SAAC1F,GACLmD,EAAUqE,QACR1H,EACEuE,EAAevD,IACfd,EACAC,EACA0E,EACAM,EACAE,GAGN,IACCgB,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,IAC/BkB,SAAQ,WACP9C,EAAY3C,KAAKmB,QAAQrC,YAAc,WACzC,IAEF6D,EAAY3C,KAAK4F,QACjB3E,EAAgB0B,EAAY3C,KAAMP,GAClC9B,EAAa8D,EACf,IAqHAmB,EAAc5C,KAAKtC,iBAAiB,UAzDpC,SAAgCN,GCxGhC,IAAoByI,EDyGlBzI,EAAEiI,iBACFzC,EAAc5C,KAAKmB,QAAQrC,YAAc,iBC1GvB+G,ED4GP,CAAEnD,OAAQE,EAAcjE,KAAKoG,OC3GjCtB,MAAM,qCAADtD,OAAsCpC,EAAM,oBAAoB,CAC1E2F,OAAQ,QACRC,QAAS,CACPC,cAAe5F,EACf,eAAgB,oBAElBsH,KAAMC,KAAKC,UAAUK,KACpBhC,MAAK,SAACC,GAAQ,OACfA,EAASC,GACLD,EAASE,OACTC,QAAQC,OAAO,GAAD/D,OAAI2D,EAASK,OAAM,iBAAgB,KDkGpDN,MAAK,SAACb,GACLR,EAAeE,OAAOQ,MAAMC,gBAAkB,OAAHhD,OAAU6C,EAAKN,OAAM,IAClE,IACC4B,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,IAC/BkB,SAAQ,WACP7C,EAAc5C,KAAKmB,QAAQrC,YAAc,WAC3C,IAEF8D,EAAc5C,KAAK4F,QACnB3E,EAAgB2B,EAAc5C,KAAMP,GACpC9B,EAAa+D,EACf,IA0CAmB,EAAe7C,KAAKtC,iBAAiB,UAAU,SAACN,IAtFhD,SAAoCA,EAAGoB,GCzHvC,IAAoB+E,ED0HlBnG,EAAEiI,kBC1HgB9B,ED2HP/E,EAAYS,IC1HhBwE,MAAM,qCAADtD,OAAsCpC,EAAM,WAAAoC,OAAUoD,GAAU,CAC1EG,OAAQ,SACRC,QAAS,CACPC,cAAe5F,KAEhB6F,MAAK,SAACC,GAAQ,OACfA,EAASC,GACLD,EAASE,OACTC,QAAQC,OAAO,GAAD/D,OAAI2D,EAASK,OAAM,iBAAgB,KDmHpDN,MAAK,kBAAMrF,EAAYZ,QAAQ,IAC/B0G,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,IAClC5G,EAAaoE,EACf,CAiFE+D,CAA2B1I,EAAG2E,EAAgBsB,aAChD,IACA5F,SAASC,iBAAiB,aJhQ1B,SAA6BN,GACtBA,EAAEoG,OAAO2B,QAAQ,oBAAoBxH,EAAaP,EAAEoG,OAC3D,IAGE/F,SAASwH,iBAAiB,UAAU7D,SAAQ,SAAChC,GAC3CA,EAAKnC,UAAUC,IAAI,oBACrB,IGuCF,SAA0BuC,GACPsG,MAAMC,KACrBvI,SAASwH,iBAAiBxF,EAAiByC,eAEpCd,SAAQ,SAACpB,IAxBpB,SAA2BT,EAAaE,GACtC,IAAMoB,EAAYkF,MAAMC,KACtBzG,EAAY0F,iBAAiBxF,EAAiB0C,gBAE1C2C,EAASvF,EAAYhC,cACzBkC,EAAiB2C,sBAGnB7C,EAAY2B,WAAaL,EACzBtB,EAAY4B,QAAU2D,EAEtBlE,EAAkBC,EAAWiE,GAC7BjE,EAAUO,SAAQ,SAACnB,GACjBA,EAAMvC,iBAAiB,SAAS,WAC9B4B,EAAQC,EAAaU,EAAOR,GAC5BmB,EAAkBC,EAAWiE,EAC/B,GACF,GACF,CAOImB,CAAkBjG,EAAMP,EAC1B,GACF,CCgNAyG,CAAiBzG,GAEjBiF,EAAY1C,EAAa,wBACzBiC,QAAQkC,IAAI,CC/QH1C,MAAM,qCAADtD,OAAsCpC,EAAM,aAAa,CACnE4F,QAAS,CACPC,cAAe5F,KAEhB6F,MAAK,SAACC,GAAQ,OACfA,EAASC,GACLD,EAASE,OACTC,QAAQC,OAAO,GAAD/D,OAAI2D,EAASK,OAAM,oBAAmB,IAKnDV,MAAM,qCAADtD,OAAsCpC,EAAM,UAAU,CAChE4F,QAAS,CACPC,cAAe5F,KAEhB6F,MAAK,SAACC,GAAQ,OACfA,EAASC,GACLD,EAASE,OACTC,QAAQC,OAAO,GAAD/D,OAAI2D,EAASK,OAAM,qBAAoB,MD6P1DN,MAAK,SAAAuC,GAA2B,IA/CdzB,E,IA+Cc0B,G,EAAA,E,4CAAAD,I,s1BAAzBE,EAAQD,EAAA,GAAEE,EAASF,EAAA,GACzBtD,EAAkBuD,GACNC,EAzHTnF,SAAQ,SAACjD,GACZmD,EAAUkF,OACRvI,EACEuE,EAAevD,IACfd,EACAC,EACA0E,EACAM,EACAE,GAGN,KA6DmBqB,EAkDL3C,GAjDD/E,UAAUW,OAAO,8BAC9B+G,EAAa7F,YAAc,EAiD3B,IACCwF,OAAM,SAACC,GACNC,QAAQC,IAAI,mBAADtE,OAAoBoE,IAC/BxB,EAAkB,CAChBlE,KAAM,YACNoE,MAAO,kDACPP,OAAQ,OAEVmC,EAAmBlD,GACnBkD,EAAmBjD,GACnBY,EAAeE,OAAOzF,UAAUC,IAAI,2BACpCwH,EAAY1C,EAAa,eAC3B,G","sources":["webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/config.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/index.js","webpack://mesto-project-ff/./src/scripts/api.js"],"sourcesContent":["function openModal(modalElement) {\r\n  modalElement.classList.add(\"popup_is-opened\");\r\n  modalElement._handlerEscape = (e) => closeOnEscape(e, modalElement);\r\n\r\n  if (modalElement.classList.contains(\"popup_type_delete-card\"))\r\n    modalElement.querySelector(\".popup__button\").focus();\r\n\r\n  document.addEventListener(\"keydown\", modalElement._handlerEscape);\r\n}\r\n\r\nfunction onCloseModalOverlay(e) {\r\n  if (!e.target.closest(\".popup__content\")) onCloseModal(e.target);\r\n}\r\n\r\nfunction setModalAnimation() {\r\n  document.querySelectorAll(\".popup\").forEach((item) => {\r\n    item.classList.add(\"popup_is-animated\");\r\n  });\r\n}\r\n\r\nfunction onCloseModal(modalElement) {\r\n  modalElement.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", modalElement._handlerEscape);\r\n  delete modalElement._handlerEscape;\r\n}\r\n\r\nconst closeOnEscape = (e, modalElement) => {\r\n  if (e.key === \"Escape\") onCloseModal(modalElement);\r\n};\r\n\r\nexport { openModal, onCloseModal, setModalAnimation, onCloseModalOverlay };","export const cohort = 'wff-cohort-38';\r\nexport const token = '8f1c1773-cf28-4597-81ab-7cac9f8c66fc';","function getCardElement(myProfileId, card, cardTemplate, onOpenImagePopup, onOpenPopupDelete, onLike) {\r\n  const cardElement = cardTemplate.querySelector('.places__item.card').cloneNode(true);\r\n  cardElement.querySelector('.card__image').src = card.link;\r\n  cardElement.querySelector('.card__image').alt = card.name;\r\n  cardElement.querySelector('.card__title').textContent = card.name;\r\n  cardElement.querySelector('.card__like-counter').textContent = card.likes ? card.likes.length : 0;\r\n  cardElement._id = card._id;\r\n\r\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n  if (card.likes.some((item) => item._id === myProfileId))\r\n    cardLikeButton.classList.add('card__like-button_is-active');\r\n\r\n  cardElement.querySelector('.card__image').addEventListener('click', () => onOpenImagePopup(card));\r\n\r\n  if (card.owner._id === myProfileId) {\r\n    cardElement.querySelector('.card__delete-button').addEventListener('click', () => onOpenPopupDelete(cardElement));\r\n  } else cardElement.querySelector('.card__delete-button').remove();\r\n\r\n  cardLikeButton.addEventListener('click', (e) => {onLike(e, cardElement)});\r\n\r\n  return cardElement;\r\n}\r\n\r\nexport { getCardElement };","function showInputError(form, input, errorMassage, validationConfig) {\r\n  const error = form.querySelector(`.${input.id}-error`);\r\n  input.classList.add(validationConfig.inputErrorClass.slice(1));\r\n  error.classList.add(validationConfig.errorClass.slice(1));\r\n  error.textContent = errorMassage;\r\n}\r\n\r\nfunction hideInputError(form, input, validationConfig) {\r\n  const error = form.querySelector(`.${input.id}-error`);\r\n  input.classList.remove(validationConfig.inputErrorClass.slice(1));\r\n  error.classList.remove(validationConfig.errorClass.slice(1));\r\n  error.textContent = \"Ошибка\";\r\n}\r\n\r\nfunction isValid(formElement, inputElement, validationConfig) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else inputElement.setCustomValidity(\"\");\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationConfig\r\n    );\r\n  } else hideInputError(formElement, inputElement, validationConfig);\r\n}\r\n\r\nconst hasInvalidInput = (inputList) =>\r\n  inputList.some((inputElement) => !inputElement.validity.valid);\r\n\r\nconst toggleButtonState = (inputList, buttonElement) => {\r\n  buttonElement.disabled = hasInvalidInput(inputList);\r\n};\r\n\r\nfunction setEventListeners(formElement, validationConfig) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  const button = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n\r\n  formElement._inputList = inputList;\r\n  formElement._button = button;\r\n\r\n  toggleButtonState(inputList, button);\r\n  inputList.forEach((input) => {\r\n    input.addEventListener(\"input\", () => {\r\n      isValid(formElement, input, validationConfig);\r\n      toggleButtonState(inputList, button);\r\n    });\r\n  });\r\n}\r\n\r\nfunction enableValidation(validationConfig) {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationConfig.formSelector)\r\n  );\r\n  formList.forEach((form) => {\r\n    setEventListeners(form, validationConfig);\r\n  });\r\n}\r\n\r\nfunction clearValidation(formElement, validationConfig) {\r\n  if (!formElement._inputList || !formElement._button) return;\r\n\r\n  formElement._inputList.forEach((input) => {\r\n    isValid(formElement, input, validationConfig);\r\n  });\r\n  toggleButtonState(formElement._inputList, formElement._button);\r\n}\r\n\r\nexport { enableValidation, clearValidation };\r\n\r\n// enableValidation({\r\n//   formSelector: '.popup__form',\r\n//   inputSelector: '.popup__input',\r\n//   submitButtonSelector: '.popup__button',\r\n//   inputErrorClass: '.popup__input_type_error',\r\n//   errorClass: '.popup__input-error_active'\r\n// });\r\n","import {\r\n  openModal,\r\n  onCloseModal,\r\n  setModalAnimation,\r\n  onCloseModalOverlay,\r\n} from \"./modal.js\";\r\n\r\nimport {\r\n  fetchUserData,\r\n  fetchCardItems,\r\n  updateUserProfile,\r\n  postCard,\r\n  deleteCard,\r\n  likeCard,\r\n  dislikeCard,\r\n  postAvatar,\r\n} from \"./api.js\";\r\n\r\nimport { getCardElement } from \"./card.js\";\r\nimport { clearValidation, enableValidation } from \"./validation.js\";\r\nimport \"../pages/index.css\";\r\n\r\n// ========== Переменные ==========\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\nconst container = document.querySelector(\".places__list\");\r\nconst popupCard = document.querySelector(\".popup_type_image\");\r\nconst popupEditProfile = document.querySelector(\".popup_type_edit\");\r\nconst popupNewCard = document.querySelector(\".popup_type_new-card\");\r\nconst popupNewAvatar = document.querySelector(\".popup_type_avatar\");\r\nconst buttonEditProfile = document.querySelector(\".profile__edit-button\");\r\nconst buttonNewCard = document.querySelector(\".profile__add-button\");\r\nconst popupCardImage = popupCard.querySelector(\".popup__image\");\r\nconst popupCardDesc = popupCard.querySelector(\".popup__caption\");\r\nconst popupDeleteCard = document.querySelector(\".popup_type_delete-card\");\r\nconst errorScreen = container.parentElement.querySelector(\".page__section-error\");\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inputErrorClass: \".popup__input_type_error\",\r\n  errorClass: \".popup__input-error_active\",\r\n};\r\n\r\n// Объект формы редактирования профиля и ее элементы\r\nconst formEditProfile = {\r\n  form: getFormModal(popupEditProfile),\r\n};\r\nformEditProfile.name = formEditProfile.form.querySelector(\"#popup__input_type_name\");\r\nformEditProfile.description = formEditProfile.form.querySelector(\"#popup__input_type_description\");\r\n\r\n// Объект текущего (отображаемого) профиля\r\nconst currentProfile = {\r\n  profile: document.querySelector(\".profile\"),\r\n};\r\ncurrentProfile.name = currentProfile.profile.querySelector(\".profile__title\");\r\ncurrentProfile.description = currentProfile.profile.querySelector(\".profile__description\");\r\ncurrentProfile.avatar = currentProfile.profile.querySelector(\".profile__image\");\r\n\r\n// Объект формы новой карточки и ее элементы\r\nconst formNewCard = {\r\n  form: getFormModal(popupNewCard),\r\n};\r\nformNewCard.name = formNewCard.form.querySelector(\r\n  \"#popup__input_type_card-name\"\r\n);\r\nformNewCard.link = formNewCard.form.querySelector(\"#popup__input_type_url\");\r\n\r\n// Объект формы новой аватарки\r\nconst formNewAvatar = {\r\n  form: getFormModal(popupNewAvatar),\r\n};\r\nformNewAvatar.link = formNewAvatar.form.querySelector(\"#popup__input_type_url\");\r\n\r\nconst formDeleteCard = {\r\n  form: getFormModal(popupDeleteCard),\r\n};\r\n\r\n// ========== Функции ==========\r\n\r\nfunction getFormModal(modalElement) {\r\n  return modalElement.querySelector(\".popup__form\");\r\n}\r\n\r\nfunction setImageModal(card) {\r\n  popupCardImage.src = card.link;\r\n  popupCardImage.alt = card.name;\r\n  popupCardDesc.textContent = card.name;\r\n  openModal(popupCard);\r\n}\r\n\r\nfunction setProfileModal(currentProfile) {\r\n  formEditProfile.name.value = currentProfile.name.textContent;\r\n  formEditProfile.description.value = currentProfile.description.textContent;\r\n}\r\n\r\n// Обработчик формы обновления профиля\r\nfunction handleFormProfileSubmit(e) {\r\n  e.preventDefault();\r\n  formEditProfile.form._button.textContent = \"Сохранение...\";\r\n  updateUserProfile({\r\n    name: formEditProfile.name.value,\r\n    about: formEditProfile.description.value,\r\n  })\r\n    .then((data) => {\r\n      currentProfile.name.textContent = data.name;\r\n      currentProfile.description.textContent = data.about;\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      formEditProfile.form._button.textContent = \"Сохранить\";\r\n    });\r\n\r\n  onCloseModal(popupEditProfile);\r\n}\r\n\r\n// Обработчик формы добавления карточки\r\nfunction handleFormCardSubmit(e) {\r\n  e.preventDefault();\r\n  formNewCard.form._button.textContent = \"Сохранение...\";\r\n\r\n  postCard({\r\n    name: formNewCard.name.value,\r\n    link: formNewCard.link.value,\r\n  })\r\n    .then((card) => {\r\n      container.prepend(\r\n        getCardElement(\r\n          currentProfile._id,\r\n          card,\r\n          cardTemplate,\r\n          setImageModal,\r\n          handlePopupDeleteCard,\r\n          handleLike\r\n        )\r\n      );\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      formNewCard.form._button.textContent = \"Сохранить\";\r\n    });\r\n\r\n  formNewCard.form.reset();\r\n  clearValidation(formNewCard.form, validationConfig);\r\n  onCloseModal(popupNewCard);\r\n}\r\n\r\nfunction renderUserProfile(data) {\r\n  currentProfile.name.textContent = data.name;\r\n  currentProfile.description.textContent = data.about;\r\n  currentProfile.avatar.style.backgroundImage = `url(${data.avatar})`;\r\n  currentProfile._id = data._id;\r\n  currentProfile.cohort = data.cohort;\r\n}\r\n\r\nfunction renderCards(data) {\r\n  data.forEach((card) => {\r\n    container.append(\r\n      getCardElement(\r\n        currentProfile._id,\r\n        card,\r\n        cardTemplate,\r\n        setImageModal,\r\n        handlePopupDeleteCard,\r\n        handleLike\r\n      )\r\n    );\r\n  });\r\n}\r\n\r\n// Обработчик на открытие модального окна удаления карточки\r\nfunction handlePopupDeleteCard(cardElement) {\r\n  openModal(popupDeleteCard);\r\n  popupDeleteCard._cardElement = cardElement;\r\n}\r\n\r\n// Обработчик формы удаления карточки\r\nfunction handleFormDeleteCardSubmit(e, cardElement) {\r\n  e.preventDefault();\r\n  deleteCard(cardElement._id)\r\n    .then(() => cardElement.remove())\r\n    .catch((err) => console.log(err));\r\n  onCloseModal(popupDeleteCard);\r\n}\r\n\r\n// Обработчик лайка\r\nfunction handleLike(e, cardElement) {\r\n  if (!e.target.classList.contains(\"card__like-button_is-active\")) {\r\n    likeCard(cardElement._id)\r\n      .then((dataLikedCard) => {\r\n        cardElement.querySelector(\".card__like-counter\").textContent = dataLikedCard.likes.length;\r\n        e.target.classList.add(\"card__like-button_is-active\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n  } else {\r\n    dislikeCard(cardElement._id)\r\n      .then((dataLikedCard) => {\r\n        cardElement.querySelector(\".card__like-counter\").textContent = dataLikedCard.likes.length;\r\n        e.target.classList.remove(\"card__like-button_is-active\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n}\r\n\r\n// Обработчик формы обновления аватара профиля\r\nfunction handleFormAvatarSubmit(e) {\r\n  e.preventDefault();\r\n  formNewAvatar.form._button.textContent = \"Сохранение...\";\r\n\r\n  postAvatar({ avatar: formNewAvatar.link.value })\r\n    .then((data) => {\r\n      currentProfile.avatar.style.backgroundImage = `url(${data.avatar})`;\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      formNewAvatar.form._button.textContent = \"Сохранить\";\r\n    });\r\n\r\n  formNewAvatar.form.reset();\r\n  clearValidation(formNewAvatar.form, validationConfig);\r\n  onCloseModal(popupNewAvatar);\r\n}\r\n\r\nfunction showWarning(errorElement, errorText) {\r\n  errorElement.classList.add(\"page__section-error-active\");\r\n  errorElement.textContent = errorText;\r\n}\r\n\r\nfunction hideWarning(errorElement) {\r\n  errorElement.classList.remove(\"page__section-error-active\");\r\n  errorElement.textContent = \"\";\r\n}\r\n\r\nfunction makeButtonDisabled(button) {\r\n  button.disabled = true;\r\n}\r\n\r\n// ========== Обработчики событий ==========\r\nbuttonEditProfile.addEventListener(\"click\", () => {\r\n  openModal(popupEditProfile);\r\n  setProfileModal(currentProfile);\r\n  clearValidation(formEditProfile.form, validationConfig);\r\n});\r\n\r\nbuttonNewCard.addEventListener(\"click\", () => {\r\n  openModal(popupNewCard);\r\n  clearValidation(formNewCard.form, validationConfig);\r\n});\r\n\r\ncurrentProfile.avatar.addEventListener(\"click\", () => {\r\n  openModal(popupNewAvatar);\r\n  clearValidation(formNewAvatar.form, validationConfig);\r\n});\r\n\r\ndocument.querySelectorAll(\".popup__close\").forEach((buttonClose) => {\r\n  buttonClose.addEventListener(\"click\", (e) => {\r\n    onCloseModal(e.target.closest(\".popup\"));\r\n  });\r\n});\r\n\r\nformEditProfile.form.addEventListener(\"submit\", handleFormProfileSubmit);\r\nformNewCard.form.addEventListener(\"submit\", handleFormCardSubmit);\r\nformNewAvatar.form.addEventListener(\"submit\", handleFormAvatarSubmit);\r\nformDeleteCard.form.addEventListener(\"submit\", (e) => {\r\n  handleFormDeleteCardSubmit(e, popupDeleteCard._cardElement);\r\n});\r\ndocument.addEventListener(\"mousedown\", onCloseModalOverlay);\r\n\r\n// ========== Инициализация ==========\r\nsetModalAnimation();\r\n\r\nenableValidation(validationConfig);\r\n\r\nshowWarning(errorScreen, \"Загрузка карточек...\");\r\nPromise.all([fetchUserData(), fetchCardItems()])\r\n  .then(([userData, cardsData]) => {\r\n    renderUserProfile(userData);\r\n    renderCards(cardsData);\r\n    hideWarning(errorScreen);\r\n  })\r\n  .catch((err) => {\r\n    console.log(`Ошибка промиса: ${err}`);\r\n    renderUserProfile({\r\n      name: `Ошибка :(`,\r\n      about: `Не удалось загрузить данные. Обновите страницу.`,\r\n      avatar: null,\r\n    });\r\n    makeButtonDisabled(buttonEditProfile);\r\n    makeButtonDisabled(buttonNewCard);\r\n    currentProfile.avatar.classList.add('profile__image-disabled');\r\n    showWarning(errorScreen, \"Тут пусто...\");\r\n  });","import { cohort, token } from \"./config.js\";\r\n\r\nfunction fetchUserData() {\r\n  return fetch(`https://mesto.nomoreparties.co/v1/${cohort}/users/me`, {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  }).then((response) =>\r\n    response.ok\r\n      ? response.json()\r\n      : Promise.reject(`${response.status} - fetchUserData`)\r\n  );\r\n}\r\n\r\nfunction fetchCardItems() {\r\n  return fetch(`https://mesto.nomoreparties.co/v1/${cohort}/cards`, {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  }).then((response) =>\r\n    response.ok\r\n      ? response.json()\r\n      : Promise.reject(`${response.status} - fetchCardItems`)\r\n  );\r\n}\r\n\r\nfunction updateUserProfile(newUserData) {\r\n  return fetch(`https://mesto.nomoreparties.co/v1/${cohort}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: {\r\n      Authorization: token,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(newUserData),\r\n  }).then((response) =>\r\n    response.ok\r\n      ? response.json()\r\n      : Promise.reject(`${response.status} - updateUserProfile`)\r\n  );\r\n}\r\n\r\nfunction postCard(newCard) {\r\n  return fetch(`https://mesto.nomoreparties.co/v1/${cohort}/cards`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Authorization: token,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(newCard),\r\n  }).then((response) =>\r\n    response.ok\r\n      ? response.json()\r\n      : Promise.reject(`${response.status} - postCard`)\r\n  );\r\n}\r\n\r\nfunction deleteCard(cardId) {\r\n  return fetch(`https://mesto.nomoreparties.co/v1/${cohort}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  }).then((response) =>\r\n    response.ok\r\n      ? response.json()\r\n      : Promise.reject(`${response.status} - deleteCard`)\r\n  );\r\n}\r\n\r\nfunction likeCard(cardId) {\r\n  return fetch(\r\n    `https://mesto.nomoreparties.co/v1/${cohort}/cards/likes/${cardId}`,\r\n    {\r\n      method: \"PUT\",\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    }\r\n  ).then((response) =>\r\n    response.ok\r\n      ? response.json()\r\n      : Promise.reject(`${response.status} - likeCard`)\r\n  );\r\n}\r\n\r\nfunction dislikeCard(cardId) {\r\n  return fetch(\r\n    `https://mesto.nomoreparties.co/v1/${cohort}/cards/likes/${cardId}`,\r\n    {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    }\r\n  ).then((response) =>\r\n    response.ok\r\n      ? response.json()\r\n      : Promise.reject(`${response.status} - dislikeCard`)\r\n  );\r\n}\r\n\r\nfunction postAvatar(newAvatar) {\r\n  return fetch(`https://mesto.nomoreparties.co/v1/${cohort}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: {\r\n      Authorization: token,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(newAvatar),\r\n  }).then((response) =>\r\n    response.ok\r\n      ? response.json()\r\n      : Promise.reject(`${response.status} - postAvatar`)\r\n  );\r\n}\r\n\r\nexport {\r\n  fetchUserData,\r\n  fetchCardItems,\r\n  updateUserProfile,\r\n  postCard,\r\n  deleteCard,\r\n  likeCard,\r\n  dislikeCard,\r\n  postAvatar,\r\n};\r\n"],"names":["openModal","modalElement","classList","add","_handlerEscape","e","closeOnEscape","contains","querySelector","focus","document","addEventListener","onCloseModal","remove","removeEventListener","key","cohort","token","getCardElement","myProfileId","card","cardTemplate","onOpenImagePopup","onOpenPopupDelete","onLike","cardElement","cloneNode","src","link","alt","name","textContent","likes","length","_id","cardLikeButton","some","item","owner","isValid","formElement","inputElement","validationConfig","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","form","input","error","concat","id","inputErrorClass","slice","errorClass","hideInputError","errorMassage","showInputError","validationMessage","toggleButtonState","inputList","buttonElement","disabled","hasInvalidInput","clearValidation","_inputList","_button","forEach","content","container","popupCard","popupEditProfile","popupNewCard","popupNewAvatar","buttonEditProfile","buttonNewCard","popupCardImage","popupCardDesc","popupDeleteCard","errorScreen","parentElement","formSelector","inputSelector","submitButtonSelector","formEditProfile","getFormModal","description","currentProfile","profile","avatar","formNewCard","formNewAvatar","formDeleteCard","setImageModal","renderUserProfile","data","about","style","backgroundImage","handlePopupDeleteCard","_cardElement","handleLike","cardId","target","fetch","method","headers","Authorization","then","response","ok","json","Promise","reject","status","dislikeCard","dataLikedCard","catch","err","console","log","showWarning","errorElement","errorText","makeButtonDisabled","button","value","setProfileModal","querySelectorAll","buttonClose","closest","newUserData","preventDefault","body","JSON","stringify","finally","newCard","prepend","reset","newAvatar","handleFormDeleteCardSubmit","Array","from","setEventListeners","enableValidation","all","_ref","_ref2","userData","cardsData","append"],"sourceRoot":""}